#ifndef NAME
#error "Define a NAME"
#endif

#ifndef PRIM
#error "Define PRIM"
#endif

#ifndef SPRITE_STRINGIFY
#define SPRITE_STRINGIFY(a) SPRITE_STRINGIFY_I(a)
#define SPRITE_STRINGIFY_I(...) #__VA_ARGS__
#endif

#define STEP_FUNCTION_NAME(name)    STEP_FUNCTION_NAME_I(name)
#define STEP_FUNCTION_NAME_I(name)  __ ## name ## _step

#define INFOTABLE_NAME(name)    INFOTABLE_NAME_I(name)
#define INFOTABLE_NAME_I(name)  name ## _Info

static tag_type STEP_FUNCTION_NAME(NAME)(RuntimeState * rts, Configuration * C)
{
  Cursor _0 = C->cursor();
  Variable _1 = _0[0];
  auto tagl = rts->hnf(C, &_1);
  if(tagl < T_CTOR) return tagl;
  unboxed_float_type value = PRIM(NodeU{_1.target}.float_->value);
  _0->forward_to(&Float_Info, value);
  return T_FWD;
}

InfoTable const INFOTABLE_NAME(NAME) {
    /*tag*/        T_FUNC
  , /*arity*/      1
  , /*alloc_size*/ sizeof(Node1)
  , /*flags*/      F_STATIC_OBJECT
  , /*name*/       SPRITE_STRINGIFY(NAME)
  , /*format*/     "p"
  , /*step*/       STEP_FUNCTION_NAME(NAME)
  , /*type*/       nullptr
  };

#undef INFOTABLE_NAME
#undef NAME
#undef PRIM
#undef STEP_FUNCTION_NAME
